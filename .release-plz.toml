[[package]]
name = "cog3pio"
changelog_path = "docs/changelog.md"

[changelog]
header = """
# Changelog\n
All notable changes to this project will be documented in this file.\n
"""
# template for the changelog body
# https://keats.github.io/tera/docs/#introduction
body = """
---\n
{% if version %}\
    ## [{{ version | trim_start_matches(pat="v") }}] - {{ timestamp | date(format="%Y-%m-%d") }}
{% else %}\
    ## Unreleased
{% endif %}\
{% for group, commits in commits | group_by(attribute="group") %}
    ### {{ group | upper_first }}
    {% for commit in commits
    | filter(attribute="scope")
    | sort(attribute="scope") %}
        - *({{commit.scope}})* {{ commit.message | split(pat="\n") | first | upper_first }}
        {%- if commit.breaking %}
        {% raw %}  {% endraw %}- **BREAKING**: {{commit.breaking_description}}
        {%- endif -%}
    {%- endfor -%}
    {% raw %}\n{% endraw %}\
    {%- for commit in commits %}
        {%- if commit.scope -%}
        {% else -%}
            - {{ commit.message | split(pat="\n") | first | upper_first }}
            {% if commit.breaking -%}
            {% raw %}  {% endraw %}- **BREAKING**: {{commit.breaking_description}}
            {% endif -%}
        {% endif -%}
    {% endfor -%}
    {% raw %}{% endraw %}\
{% endfor %}
{%- if remote.contributors %}
  ### ğŸ§‘â€ğŸ¤â€ğŸ§‘ Contributors
  {% for contributor in remote.contributors %}
    - [@{{ contributor.username }}](https:://github.com/{{ contributor.username }})
  {%- endfor %}
  {% raw %}\n{% endraw %}\
{% endif -%}
{%- macro username(commit) -%}
    {% if commit.remote.username %} {% endif -%}
{% endmacro -%}
"""
trim = true

# process each line of a commit as an individual commit
commit_preprocessors = [
    # Replace the issue/PR number with the link.
    { pattern = "\\(#([0-9]+)\\)", replace = "([#${1}](https://github.com/weiji14/cog3pio/pull/${1}))" },
    # Replace gitmoji
    { pattern = ':art:', replace = "ğŸ¨" },
    { pattern = ':arrow_down:', replace = "â¬‡ï¸" },
    { pattern = ':arrow_up:', replace = "â¬†ï¸" },
    { pattern = ':boom:', replace = "ğŸ’¥" },
    { pattern = ':bug:', replace = "ğŸ›" },
    { pattern = ':construction_worker:', replace = "ğŸ‘·" },
    { pattern = ':heavy_minus_sign:', replace = "â–" },
    { pattern = ':heavy_plus_sign:', replace = "â•" },
    { pattern = ':lock:', replace = "ğŸ”’ï¸" },
    { pattern = ':loud_sound:', replace = "ğŸ”Š" },
    { pattern = ':memo:', replace = "ğŸ“" },
    { pattern = ':pushpin:', replace = "ğŸ“Œ" },
    { pattern = ':recycle:', replace = "â™»ï¸" },
    { pattern = ':rocket:', replace = "ğŸš€" },
    { pattern = ':rotating_light:', replace = "ğŸš¨" },
    { pattern = ':seedling:', replace = "ğŸŒ±" },
    { pattern = ':sparkles:', replace = "âœ¨" },
    { pattern = ':truck:', replace = "ğŸšš" },
    { pattern = ':wrench:', replace = "ğŸ”§" },
]
# regex for parsing and grouping commits
commit_parsers = [
    # Gitmoji
    { message = "^(ğŸ’¥|:boom:|ğŸš€|:rocket:)", group = "<!-- 0 --> ğŸŒˆ Highlights" },
    { message = "^(âœ¨|:sparkles:)", group = "<!-- 1 --> âœ¨ Features" },
    { message = "^(ğŸ›|:bug:)", group = "<!-- 2 --> ğŸ› Bug Fixes" },
    { message = "^(â™»ï¸|:recycle:|ğŸšš|:truck:|ğŸ¨|:art:)", group = "<!-- 3 --> ğŸ­ Refactors" },
    { message = "^(ğŸ“|:memo:)", group = "<!-- 4 --> ğŸ“ Documentation" },
    { message = "^(ğŸ‘·|:construction_worker:|ğŸ”§|:wrench:|â¬†ï¸|:arrow_up:|â•|:heavy_plus_sign:|â–|:heavy_minus_sign:|â¬‡ï¸|:arrow_down:|ğŸ“Œ|:pushpin:|ğŸ”’ï¸|:lock:|ğŸš¨|:rotating_light:|ğŸŒ±|:seedling:|ğŸ”Š|:loud_sound:)", group = "<!-- 5 --> ğŸ§° Maintenance" },
]
# sort the commits inside sections by oldest/newest order
sort_commits = "newest"
